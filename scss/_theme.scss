@use "sass:meta";

@mixin gen-paper-swatches($theme, $paper-function) {
  --clr-#{$theme}-paper-0: #{meta.call($paper-function, 0)};
  --clr-#{$theme}-paper-10: #{meta.call($paper-function, 10)};
  --clr-#{$theme}-paper-20: #{meta.call($paper-function, 20)};
  --clr-#{$theme}-paper-30: #{meta.call($paper-function, 30)};
}
@mixin gen-ink-swatches($theme, $ink-function) {
  --clr-#{$theme}-ink-100: #{meta.call($ink-function, 100)};
  --clr-#{$theme}-ink-90: #{meta.call($ink-function, 90)};
  --clr-#{$theme}-ink-80: #{meta.call($ink-function, 80)};
  --clr-#{$theme}-ink-70: #{meta.call($ink-function, 70)};
  --clr-#{$theme}-ink-60: #{meta.call($ink-function, 60)};
  --clr-#{$theme}-ink-50: #{meta.call($ink-function, 50)};
  --clr-#{$theme}-ink-40: #{meta.call($ink-function, 40)};
  --clr-#{$theme}-ink-30: #{meta.call($ink-function, 30)};
  --clr-#{$theme}-ink-20: #{meta.call($ink-function, 20)};
  --clr-#{$theme}-ink-10: #{meta.call($ink-function, 10)};
}

@function gen-light-paper($shade) {
  @return hsl(220, calc(25% + $shade * 0.5%), calc(90% + $shade * 0.35%));
}
@function gen-light-ink($shade) {
  @return hsla(220, 100%, calc(20% - $shade * 0.2%), calc($shade * 1%));
}
@function gen-dark-paper($shade) {
  @return hsl(220, calc(15% + $shade * 0.1%), calc(2% + $shade * 0.5%));
}
@function gen-dark-ink($shade) {
  @return hsla(220, 100%, calc(80% + $shade * 0.2%), calc($shade * 1%));
}

:root {
  @include gen-paper-swatches("light", meta.get-function("gen-light-paper"));
  @include gen-ink-swatches("light", meta.get-function("gen-light-ink"));
  --clr-light-accent: hsl(210, 100%, 45%);
  --clr-light-on-accent: #ffffff;

  @include gen-paper-swatches("dark", meta.get-function("gen-dark-paper"));
  @include gen-ink-swatches("dark", meta.get-function("gen-dark-ink"));
  --clr-dark-accent: hsl(210, 100%, 70%);
  --clr-dark-on-accent: #000000;
}
:root,
dialog::backdrop {
  --clr-light-shadow-100: black;
  --clr-light-shadow-30: rgba(0, 0, 0, 70%);
  --clr-light-shadow-20: rgba(0, 0, 0, 40%);
  --clr-light-shadow-10: rgba(0, 0, 0, 10%);

  --clr-dark-shadow-100: black;
  --clr-dark-shadow-30: rgba(0, 0, 0, 80%);
  --clr-dark-shadow-20: rgba(0, 0, 0, 60%);
  --clr-dark-shadow-10: rgba(0, 0, 0, 20%);
}

@mixin gen-theme($theme) {
  --clr-paper-0: var(--clr-#{$theme}-paper-0);
  --clr-paper-10: var(--clr-#{$theme}-paper-10);
  --clr-paper-20: var(--clr-#{$theme}-paper-20);
  --clr-paper-30: var(--clr-#{$theme}-paper-30);

  --clr-ink-100: var(--clr-#{$theme}-ink-100);
  --clr-ink-90: var(--clr-#{$theme}-ink-90);
  --clr-ink-80: var(--clr-#{$theme}-ink-80);
  --clr-ink-70: var(--clr-#{$theme}-ink-70);
  --clr-ink-60: var(--clr-#{$theme}-ink-60);
  --clr-ink-50: var(--clr-#{$theme}-ink-50);
  --clr-ink-40: var(--clr-#{$theme}-ink-40);
  --clr-ink-30: var(--clr-#{$theme}-ink-30);
  --clr-ink-20: var(--clr-#{$theme}-ink-20);
  --clr-ink-10: var(--clr-#{$theme}-ink-10);

  --clr-accent: var(--clr-#{$theme}-accent);
  --clr-on-accent: var(--clr-#{$theme}-on-accent);
}
@mixin gen-theme-shadow($theme) {
  --clr-shadow-100: var(--clr-#{$theme}-shadow-100);
  --clr-shadow-30: var(--clr-#{$theme}-shadow-30);
  --clr-shadow-20: var(--clr-#{$theme}-shadow-20);
  --clr-shadow-10: var(--clr-#{$theme}-shadow-10);
}
@mixin base-theme($theme) {
  :root {
    @include gen-theme($theme);
  }
  :root,
  dialog::backdrop {
    @include gen-theme-shadow($theme);
  }
}

@mixin light-base {
  @include base-theme("light");
}
@mixin dark-base {
  @include base-theme("dark");
  :root,
  dialog::backdrop {
    color-scheme: dark;
  }
}
@mixin light-div {
  @include gen-theme("light");
  @include gen-theme-shadow("light");
}
@mixin dark-div {
  @include gen-theme("dark");
  @include gen-theme-shadow("dark");
  color-scheme: dark;
}

@mixin bg-paper-0 {
  background-color: var(--clr-paper-0);
}
@mixin bg-paper-10 {
  background-color: var(--clr-paper-10);
}
@mixin bg-paper-20 {
  background-color: var(--clr-paper-20);
}
@mixin bg-paper-30 {
  background-color: var(--clr-paper-30);
}

// Set default theme to light.
@include light-base;
body {
  @include bg-paper-10;
}
